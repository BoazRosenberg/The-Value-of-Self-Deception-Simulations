# The Value of Self-Deception: Simulation Framework

This repository contains a comprehensive framework for simulating agent decision-making and learning processes used in the article "The Value of Self-Deception: Implications of Conflict in
Dual-Process Action Selection"

The simulations demonstrate conditions under which agents learn to value bias (Simulation A) and uncertainty (Simulation B), and learn to devalue bias towards unstably noisy information sources (Simulation C).

## Project Structure

### 1. Core Logic
These files constitute the backbone of the framework and define how the agents and the environment interact.
*   **`agent.py`**: The primary backbone of the simulation. It defines the `Agent` class, encompassing state variables, value assessments for different actions, and methods for decision-making and evaluation.
*   **`functions.py`**: Contains essential utility functions used across the entire framework.
*   **`value_functions.py`**: Defines the specific mathematical value functions used by agents to evaluate their states.
*   **`actions.py`**: Contains the logic for both generating possible action sets and for evaluating them by the agent.

### 2. Simulation Wrappers
*   **`define_simulations.py`**: This file acts as the bridge between the agents and the experiments. 

### 3. Execution
These are the files intended for the end-user. 
*   **`setup.py`**: This script initializes the simulation environment by creating the `S_hat.csv` file, using `create_S_hat.py`. **It should be run before executing any simulations**.

*   **`simulation_A.py`**, **`simulation_B.py`**, **`simulation_C.py`**: These scripts run the actual simulations by calling the logic in `define_simulations.py`. 
    *   Users can open these files to adjust specific parameters or toggle between different versions of a simulation.
    *   Users may also modify `value_functions.py` if they wish to change the value functions used in the simulations (intended primarily for simulation A).

### 4. Data & Learning Shortcuts
*   **`create_S_hat.py`**: This script generates the `S_hat.csv` file, which is used as a computational shortcut for learning processes in the simulations.
*   **`results/`**: All output data generated by running Simulation A, B, or C are automatically stored in this directory.

### 5. Visualization
*   **`visualize results.Rproj`**: An R project containing the scripts `Simulation A.R`, `Simulation B.R` and `Simulation C.R`.
* Each script processes the simulation results stored in the `results/` folder and generate visualizations for the simulation results.
* Plots are saved automatically in the `plots/` folder.

---

## Getting Started

### Prerequisites
To run the simulations, you need Python 3.x installed with the following libraries:
*   `pandas`
*   `numpy`
*   `matplotlib`
*   `tqdm`
*   `concurrent.futures` and `multiprocessing`

### How to Run
1.  **Run the Setup Script**: This creates "S_hat.csv", which is used for efficient state estimation. From the repository root:
    ```bash
    python setup.py
    ```

2.  **Select a Simulation**: Choose which experiment you wish to run (A, B, or C).
3.  **Configure Parameters (optional)**: Open the chosen file (e.g., `simulation_A.py`) and adjust any simulation-specific parameters as needed.
4.  **Execute**: Run the script from your terminal:
    ```bash
    python simulation_A.py
    ```
5.  **Visualize Results**: Use the provided R script to generate plots from the CSV files generated in the "results" folder.

---

## Citation

This repository is the official implementation for the following manuscript. If you use this code or refer to the model in your research, please cite:

**APA:**
> Rosenberg, B., & Eldar, E. (2026). *The Value of Self-Deception: Implications of Conflict in Dual-Process Action Selection*. Manuscript submitted for publication.

**BibTeX:**
```bibtex
@unpublished{rosenberg_eldar_2026,
  author = {Rosenberg, Boaz and Eldar, Eran},
  title  = {{The Value of Self-Deception: Implications of Conflict in Dual-Process Action Selection}},
  year   = {2026},
  note   = {Manuscript submitted for publication},
  institution = {The Hebrew University of Jerusalem}
}
```

---
## Contact

For any questions regarding the simulation logic, the theoretical model, or to report issues, please contact:

**Boaz Rosenberg**  
The Hebrew University of Jerusalem  
**Email:** [Boaz.Rosenberg@mail.huji.ac.il](mailto:Boaz.Rosenberg@mail.huji.ac.il)